"use strict";(self["webpackChunkhache"]=self["webpackChunkhache"]||[]).push([[419],{2539:(e,n,a)=>{a.d(n,{t:()=>o});const o=(e,n)=>e?e.substring(0,n).concat(e&&e.length>n?".":""):e},1245:(e,n,a)=>{a.d(n,{Z:()=>d});var o=a(6252),l=a(2262),t=a(8903),u=a(7491),s=a(2201);const r=(0,o.aZ)({__name:"BtnGoBack",setup(e){const n=(0,s.tv)();return(e,a)=>((0,o.wg)(),(0,o.j4)((0,l.SU)(u.IJ),{slot:"fixed",vertical:"bottom",horizontal:"end"},{default:(0,o.w5)((()=>[(0,o.Wm)((0,l.SU)(u.W4),{color:"secondary",onClick:a[0]||(a[0]=e=>{(0,l.SU)(n).back()}),class:"button-transparent",size:"small"},{default:(0,o.w5)((()=>[(0,o.Wm)((0,l.SU)(u.gu),{icon:(0,l.SU)(t.pr5)},null,8,["icon"])])),_:1})])),_:1}))}});var i=a(3744);const c=(0,i.Z)(r,[["__scopeId","data-v-c2ffac36"]]),d=c},2419:(e,n,a)=>{a.r(n),a.d(n,{default:()=>M});a(3948),a(7658);var o=a(6252),l=a(2262),t=a(3577),u=a(3508),s=a(8903),r=a(7491),i=a(5306),c=a(8456),d=a(4276),m=a(1245),w=a(4865);const f=(0,o.aZ)({__name:"ListCheckSummary",props:{mapCheck:null},setup(e){const n=e;return(e,a)=>((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.mapCheck,((e,n)=>((0,o.wg)(),(0,o.j4)((0,l.SU)(r.Ie),{class:"ion-no-padding ion-no-margin",key:n},{default:(0,o.w5)((()=>[(0,o.Wm)((0,l.SU)(r.Bs),{slot:"start"},{default:(0,o.w5)((()=>[(0,o.Wm)((0,l.SU)(r.Q$),null,{default:(0,o.w5)((()=>[(0,o._)("p",null,(0,t.zw)(e[0]),1)])),_:2},1024)])),_:2},1024),(0,o.Wm)((0,l.SU)(r.Q$),{class:"ion-no-padding ion-no-margin"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e[1],((e,n)=>((0,o.wg)(),(0,o.j4)((0,l.SU)(r.Ie),{class:"ion-no-padding ion-no-margin",lines:"none",key:n},{default:(0,o.w5)((()=>[(0,o.Wm)((0,l.SU)(r.yW),{slot:"end",class:"ion-padding-right ion-no-margin"},{default:(0,o.w5)((()=>[(0,o._)("p",null,(0,t.zw)((0,l.SU)(w.bP)(e[1]))+" - ("+(0,t.zw)(e[0])+")",1)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1024)))),128))}});var g=a(3744);const _=(0,g.Z)(f,[["__scopeId","data-v-53a4ddc4"]]),U=_;var p=a(1736),S=a(2539),y=a(2859),W=a(2201);const v=e=>((0,o.dD)("data-v-cb684e2e"),e=e(),(0,o.Cn)(),e),k=v((()=>(0,o._)("strong",null,"Resumen de gastos",-1))),h=v((()=>(0,o._)("strong",null,"Resultados",-1))),I=v((()=>(0,o._)("h3",null,"No hay transacciones a realizar",-1))),b=v((()=>(0,o._)("strong",null,"Gastos",-1))),j={key:0},z=v((()=>(0,o._)("h3",null,"No hay gastos por el momento",-1))),C=v((()=>(0,o._)("strong",null,"Deudas",-1))),Z={key:0},N=v((()=>(0,o._)("h3",null,"No hay deudas por el momento",-1))),D=(0,o.aZ)({__name:"CheckBill",setup(e){const n=(0,W.tv)(),a=y.O.getInstance(),f=i.Z.getInstance(),g=(0,l.iH)(f.getMeetActive().active),_=(0,l.iH)(new Map),v=(0,l.iH)(new Map),D=(0,l.iH)(new Map),H=(0,l.iH)(!1),M=(0,l.iH)(!1),$=(0,l.iH)(!1),P="/settle/main/meet-list",Q=async()=>{const e=await c.Z.confirmCancelAlert("Confirma cerrar el encuentro?, ya no podrÃ¡ agregar pagos.","Cancelar","Cierre");e&&(H.value=!0,await f.closeMeet(),H.value=!1,n.push(P))};function Y(e){return(0,S.t)(e,7)}const q=e=>{const n=new Map;for(const[a,o]of e){const e=new Map;for(const[n,a]of o){const o=new Array;for(const e of a)if(e.amount>0){const n=o.find((n=>n.user.name===e.user.name));n?n.amount+=e.amount:o.push(e)}e.set(n,o)}n.set(a,e)}return n},x=(e,n)=>Number(e.amount)<=Number(n.amount)&&(n.amount-=e.amount,e.amount=0,!0),B=(e,n,a)=>{for(const o of n)if(o.amount>0&&e.amount>0&&(Number(e.amount)>Number(o.amount)&&(e.amount-=o.amount,a.push((0,u.Z)(o)),o.amount=0),x(e,o)))break;return a},K=(e,n)=>e.find((e=>e.user.name===n&&e.amount>0)),A=e=>{for(const[n,a]of e){console.log("Recorro currency:",n);for(const[e,n]of a){let o=n;for(const n of o){const l=a.get(n.user.name);if(l){const a=K(l,e);if(a){if(a.amount>0&&n.amount>0){if(x(n,a))break;Number(n.amount)>Number(a.amount)&&(n.amount-=a.amount,a.amount=0,o=B(n,l,o))}}else Number(n.amount)>0&&(o=B(n,l,o))}}}}return e},L=(e,n)=>null===e||void 0===e?void 0:e.find((e=>e.user.idUser===n)),R=(e,n,a)=>{a||(a=new Array);for(const o of e)if(o.user.name!==n){const e=L(a,o.user.idUser);e?e.amount+=o.amount:a.push(o)}return a},G=e=>{let n;const a=new Map;for(const o of e){const e=o.receipt.currency.code;let l=a.get(e);l||(l=new Map);for(const a of o.listUsersPaid){const e=a.userPaid.user.name;l&&(n=l.get(e)),n=R(a.listUsersDebt,e,n),n.length>0&&l.set(e,n)}l.size>0&&a.set(e,l)}return a},F=(e,n,a,o)=>{const l=e.get(n);if(l){let e=l.get(o);e?e+=a:e=a,l.set(o,e)}else{const l=new Map;l.set(o,a),e.set(n,l)}return e},J=e=>{_.value=new Map,v.value=new Map;for(const n of e){const e=n.receipt.currency.code;for(const a of n.listUsersPaid){const n=a.userPaid.user.name,o=Number(a.userPaid.amount);_.value=F(_.value,n,o,e);for(const l of a.listUsersDebt)v.value=F(v.value,l.user.name,l.amount,e)}}};return(0,r.KA)((()=>{H.value=!0,J((0,u.Z)(a.getListBill())),D.value=G((0,u.Z)(a.getListBill())),D.value=A((0,u.Z)(D.value)),D.value=q(D.value),H.value=!1})),(e,n)=>{const a=(0,o.up)("IonContent"),u=(0,o.up)("IonPage");return(0,o.wg)(),(0,o.j4)(u,null,{default:(0,o.w5)((()=>[(0,o.Wm)(d.Z),(0,o.Wm)(a,{class:"ion-padding",fullscreen:!0},{default:(0,o.w5)((()=>[(0,o.Wm)(p.Z,{"show-progress":H.value},null,8,["show-progress"]),(0,o.Wm)((0,l.SU)(r.Ie),{style:{"text-align":"center"}},{default:(0,o.w5)((()=>[(0,o.Wm)((0,l.SU)(r.Q$),null,{default:(0,o.w5)((()=>[(0,o.Wm)((0,l.SU)(r.yW),{color:"secondary"},{default:(0,o.w5)((()=>[k])),_:1})])),_:1})])),_:1}),(0,o.Wm)((0,l.SU)(r.Ie),{class:"ion-no-padding ion-no-margin"},{default:(0,o.w5)((()=>[(0,o.Wm)((0,l.SU)(r.Q$),null,{default:(0,o.w5)((()=>[(0,o.Wm)((0,l.SU)(r.yW),{color:"secondary"},{default:(0,o.w5)((()=>[h])),_:1})])),_:1})])),_:1}),0===D.value.size?((0,o.wg)(),(0,o.j4)((0,l.SU)(r.Ie),{key:0,lines:"none"},{default:(0,o.w5)((()=>[(0,o.Wm)((0,l.SU)(r.Q$),{style:{"text-align":"center"},color:"secondary"},{default:(0,o.w5)((()=>[I])),_:1})])),_:1})):(0,o.kq)("",!0),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(D.value,((e,n)=>((0,o.wg)(),(0,o.j4)((0,l.SU)(r.Ie),{key:n},{default:(0,o.w5)((()=>[e[1].size>0?((0,o.wg)(),(0,o.j4)((0,l.SU)(r.Q$),{key:0,class:"ion-no-margin ion-no-padding"},{default:(0,o.w5)((()=>[(0,o._)("h3",null,[(0,o.Wm)((0,l.SU)(r.yW),{color:"secondary"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,t.zw)(e[0]),1)])),_:2},1024)]),(0,o.Wm)((0,l.SU)(r.jY),{class:"ion-no-margin ion-no-padding"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e[1],((e,n)=>((0,o.wg)(),(0,o.j4)((0,l.SU)(r.Nd),{key:n},{default:(0,o.w5)((()=>[(0,o.Wm)((0,l.SU)(r.wI),null,{default:(0,o.w5)((()=>[(0,o.Wm)((0,l.SU)(r.jY),{class:"ion-no-margin ion-no-padding"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e[1],((n,a)=>((0,o.wg)(),(0,o.j4)((0,l.SU)(r.Nd),{key:a},{default:(0,o.w5)((()=>[(0,o.Wm)((0,l.SU)(r.wI),{style:{"text-align":"left"}},{default:(0,o.w5)((()=>[(0,o.Wm)((0,l.SU)(r.yW),{class:"ion-no-padding ion-no-margin"},{default:(0,o.w5)((()=>[(0,o._)("p",null,(0,t.zw)(Y(n.user.name)),1),(0,o._)("p",null,"("+(0,t.zw)((0,l.SU)(w.bP)(n.amount))+")",1)])),_:2},1024)])),_:2},1024),(0,o.Wm)((0,l.SU)(r.wI),{size:"auto"},{default:(0,o.w5)((()=>[(0,o.Wm)((0,l.SU)(r.gu),{color:"secondary",icon:(0,l.SU)(s.QzP)},null,8,["icon"])])),_:1}),(0,o.Wm)((0,l.SU)(r.wI),{style:{"text-align":"right"}},{default:(0,o.w5)((()=>[(0,o.Wm)((0,l.SU)(r.yW),{class:"ion-no-padding ion-no-margin"},{default:(0,o.w5)((()=>[(0,o._)("p",null,(0,t.zw)(e[0]),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1024)):(0,o.kq)("",!0)])),_:2},1024)))),128)),(0,o.Wm)((0,l.SU)(r.Ie),{lines:"none",class:"ion-no-padding ion-no-margin"},{default:(0,o.w5)((()=>[(0,o.Wm)((0,l.SU)(r.Q$),null,{default:(0,o.w5)((()=>[(0,o.Wm)((0,l.SU)(r.Nd),{onClick:n[0]||(n[0]=e=>M.value=!M.value)},{default:(0,o.w5)((()=>[(0,o.Wm)((0,l.SU)(r.wI),{size:"1"},{default:(0,o.w5)((()=>[M.value?((0,o.wg)(),(0,o.j4)((0,l.SU)(r.gu),{key:0,color:"secondary",icon:(0,l.SU)(s.Y$3)},null,8,["icon"])):((0,o.wg)(),(0,o.j4)((0,l.SU)(r.gu),{key:1,color:"secondary",icon:(0,l.SU)(s.Dji)},null,8,["icon"]))])),_:1}),(0,o.Wm)((0,l.SU)(r.wI),{style:{"text-align":"left"}},{default:(0,o.w5)((()=>[(0,o.Wm)((0,l.SU)(r.yW),{color:"secondary"},{default:(0,o.w5)((()=>[b])),_:1})])),_:1})])),_:1}),M.value?((0,o.wg)(),(0,o.iD)("div",j,[(0,o.Wm)(U,{"map-check":_.value},null,8,["map-check"]),0===_.value.size?((0,o.wg)(),(0,o.j4)((0,l.SU)(r.Ie),{key:0,lines:"none"},{default:(0,o.w5)((()=>[z])),_:1})):(0,o.kq)("",!0)])):(0,o.kq)("",!0)])),_:1})])),_:1}),(0,o.Wm)((0,l.SU)(r.Ie),{lines:"none",class:"ion-no-padding ion-no-margin"},{default:(0,o.w5)((()=>[(0,o.Wm)((0,l.SU)(r.Q$),null,{default:(0,o.w5)((()=>[(0,o.Wm)((0,l.SU)(r.Nd),{onClick:n[1]||(n[1]=e=>$.value=!$.value)},{default:(0,o.w5)((()=>[(0,o.Wm)((0,l.SU)(r.wI),{size:"1"},{default:(0,o.w5)((()=>[$.value?((0,o.wg)(),(0,o.j4)((0,l.SU)(r.gu),{key:0,color:"secondary",icon:(0,l.SU)(s.Y$3)},null,8,["icon"])):((0,o.wg)(),(0,o.j4)((0,l.SU)(r.gu),{key:1,color:"secondary",icon:(0,l.SU)(s.Dji)},null,8,["icon"]))])),_:1}),(0,o.Wm)((0,l.SU)(r.wI),{style:{"text-align":"left"}},{default:(0,o.w5)((()=>[(0,o.Wm)((0,l.SU)(r.yW),{color:"secondary"},{default:(0,o.w5)((()=>[C])),_:1})])),_:1})])),_:1}),$.value?((0,o.wg)(),(0,o.iD)("div",Z,[(0,o.Wm)(U,{"map-check":v.value},null,8,["map-check"]),0===v.value.size?((0,o.wg)(),(0,o.j4)((0,l.SU)(r.Ie),{key:0,lines:"none"},{default:(0,o.w5)((()=>[N])),_:1})):(0,o.kq)("",!0)])):(0,o.kq)("",!0)])),_:1})])),_:1}),g.value&&D.value.size>0?((0,o.wg)(),(0,o.j4)((0,l.SU)(r.Ie),{key:1,lines:"none",class:"ion-no-padding ion-no-margin"},{default:(0,o.w5)((()=>[(0,o.Wm)((0,l.SU)(r.gu),{color:"secondary",icon:(0,l.SU)(s.F0U),onClick:Q},null,8,["icon"])])),_:1})):(0,o.kq)("",!0),(0,o.Wm)(m.Z)])),_:1})])),_:1})}}}),H=(0,g.Z)(D,[["__scopeId","data-v-cb684e2e"]]),M=H}}]);
//# sourceMappingURL=419.3cfb43a1.js.map